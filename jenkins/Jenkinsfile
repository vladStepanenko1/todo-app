pipeline{
    agent any
    environment{
        TELEGRAM_TOKEN_ID = '1859740706:AAG6q4GAbIRBFTWfA145s1qZBmqgPSUr5Dg'
        TELEGRAM_CHAT_ID = -1001154952259
        API_URL = 'https://api.telegram.org/bot${TELEGRAM_TOKEN_ID}/sendMessage'
    }
    stages{
        stage('Build'){
            steps{
                script{
                    def image = docker.build("todo-app:${env.BUILD_ID}", "-f docker/Dockerfile .")
                }
            }
        }
    }
    post{
        always{
            sh 'curl -s -X POST ${URL} -d chat_id=${TELEGRAM_CHAT_ID} -d text="${PROJECT_NAME}:${BUILD_STATUS}"'
        }
    }
}